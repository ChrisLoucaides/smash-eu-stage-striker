import{e as Rt,r as U,m as At,a as Ot,i as xe,b as xt,t as on,g as ln,o as cn,w as fe,n as Ne,c as un,d as E,f as ve,h as dn,s as fn,j as X,u as re,k as mn,p as De,l as Nt,q as pn,v as M,x as K,y as o,z as x,A as Mt,B as de,C as $e,T as Me,D as Ge,E as vn,F as hn,G as Y,H as me,I as rt,J as G,K as Oe,L as gn,M as pe,N as yn,O as bn,P as ot,Q as _n}from"./vendor-BHFgwRW4.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();const Sn="modulepreload",Pn=function(e){return"/smash-eu-stage-striker/"+e},lt={},Gt=function(t,n,s){let a=Promise.resolve();if(n&&n.length>0){let i=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),f=l?.nonce||l?.getAttribute("nonce");a=i(n.map(d=>{if(d=Pn(d),d in lt)return;lt[d]=!0;const p=d.endsWith(".css"),c=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${c}`))return;const u=document.createElement("link");if(u.rel=p?"stylesheet":Sn,p||(u.as="script"),u.crossOrigin="",u.href=d,f&&u.setAttribute("nonce",f),document.head.appendChild(u),p)return new Promise((m,w)=>{u.addEventListener("load",m),u.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function r(l){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=l,window.dispatchEvent(f),!f.defaultPrevented)throw l}return a.then(l=>{for(const f of l||[])f.status==="rejected"&&r(f.reason);return t().catch(r)})};/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let It;const Ie=e=>It=e,Lt=Symbol();function Qe(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var ke;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ke||(ke={}));function wn(){const e=Rt(!0),t=e.run(()=>U({}));let n=[],s=[];const a=At({install(r){Ie(a),a._a=r,r.provide(Lt,a),r.config.globalProperties.$pinia=a,s.forEach(l=>n.push(l)),s=[]},use(r){return this._a?n.push(r):s.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return a}const Tt=()=>{};function it(e,t,n,s=Tt){e.push(t);const a=()=>{const r=e.indexOf(t);r>-1&&(e.splice(r,1),s())};return!n&&ln()&&cn(a),a}function ge(e,...t){e.slice().forEach(n=>{n(...t)})}const kn=e=>e(),ct=Symbol(),We=Symbol();function Je(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,s)=>e.set(s,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const s=t[n],a=e[n];Qe(a)&&Qe(s)&&e.hasOwnProperty(n)&&!xe(s)&&!xt(s)?e[n]=Je(a,s):e[n]=s}return e}const En=Symbol();function Bn(e){return!Qe(e)||!Object.prototype.hasOwnProperty.call(e,En)}const{assign:ce}=Object;function $n(e){return!!(xe(e)&&e.effect)}function Cn(e,t,n,s){const{state:a,actions:r,getters:l}=t,f=n.state.value[e];let i;function d(){f||(n.state.value[e]=a?a():{});const p=un(n.state.value[e]);return ce(p,r,Object.keys(l||{}).reduce((c,u)=>(c[u]=At(E(()=>{Ie(n);const m=n._s.get(e);return l[u].call(m,m)})),c),{}))}return i=Ft(e,d,t,n,s,!0),i}function Ft(e,t,n={},s,a,r){let l;const f=ce({actions:{}},n),i={deep:!0};let d,p,c=[],u=[],m;const w=s.state.value[e];!r&&!w&&(s.state.value[e]={}),U({});let B;function h(y){let S;d=p=!1,typeof y=="function"?(y(s.state.value[e]),S={type:ke.patchFunction,storeId:e,events:m}):(Je(s.state.value[e],y),S={type:ke.patchObject,payload:y,storeId:e,events:m});const V=B=Symbol();Ne().then(()=>{B===V&&(d=!0)}),p=!0,ge(c,S,s.state.value[e])}const $=r?function(){const{state:S}=n,V=S?S():{};this.$patch(Z=>{ce(Z,V)})}:Tt;function C(){l.stop(),c=[],u=[],s._s.delete(e)}const A=(y,S="")=>{if(ct in y)return y[We]=S,y;const V=function(){Ie(s);const Z=Array.from(arguments),ne=[],ee=[];function P(T){ne.push(T)}function F(T){ee.push(T)}ge(u,{args:Z,name:V[We],store:L,after:P,onError:F});let z;try{z=y.apply(this&&this.$id===e?this:L,Z)}catch(T){throw ge(ee,T),T}return z instanceof Promise?z.then(T=>(ge(ne,T),T)).catch(T=>(ge(ee,T),Promise.reject(T))):(ge(ne,z),z)};return V[ct]=!0,V[We]=S,V},W={_p:s,$id:e,$onAction:it.bind(null,u),$patch:h,$reset:$,$subscribe(y,S={}){const V=it(c,y,S.detached,()=>Z()),Z=l.run(()=>fe(()=>s.state.value[e],ne=>{(S.flush==="sync"?p:d)&&y({storeId:e,type:ke.direct,events:m},ne)},ce({},i,S)));return V},$dispose:C},L=Ot(W);s._s.set(e,L);const _=(s._a&&s._a.runWithContext||kn)(()=>s._e.run(()=>(l=Rt()).run(()=>t({action:A}))));for(const y in _){const S=_[y];if(xe(S)&&!$n(S)||xt(S))r||(w&&Bn(S)&&(xe(S)?S.value=w[y]:Je(S,w[y])),s.state.value[e][y]=S);else if(typeof S=="function"){const V=A(S,y);_[y]=V,f.actions[y]=S}}return ce(L,_),ce(on(L),_),Object.defineProperty(L,"$state",{get:()=>s.state.value[e],set:y=>{h(S=>{ce(S,y)})}}),s._p.forEach(y=>{ce(L,l.run(()=>y({store:L,app:s._a,pinia:s,options:f})))}),w&&r&&n.hydrate&&n.hydrate(L.$state,w),d=!0,p=!0,L}/*! #__NO_SIDE_EFFECTS__ */function Rn(e,t,n){let s;const a=typeof t=="function";s=a?n:t;function r(l,f){const i=dn();return l=l||(i?ve(Lt,null):null),l&&Ie(l),l=It,l._s.has(e)||(a?Ft(e,t,s,l):Cn(e,s,l)),l._s.get(e)}return r.$id=e,r}const An=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,On=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,xn=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Nn(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){Mn(e);return}return t}function Mn(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function Gn(e,t={}){if(typeof e!="string")return e;if(e[0]==='"'&&e[e.length-1]==='"'&&e.indexOf("\\")===-1)return e.slice(1,-1);const n=e.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!xn.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(An.test(e)||On.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,Nn)}return JSON.parse(e)}catch(s){if(t.strict)throw s;return e}}function In(e,t){if(e==null)return;let n=e;for(let s=0;s<t.length;s++){if(n==null||n[t[s]]==null)return;n=n[t[s]]}return n}function et(e,t,n){if(n.length===0)return t;const s=n[0];return n.length>1&&(t=et(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,s)?Number.isInteger(Number(n[1]))?[]:{}:e[s],t,Array.prototype.slice.call(n,1))),Number.isInteger(Number(s))&&Array.isArray(e)?e.slice()[s]:Object.assign({},e,{[s]:t})}function Ut(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const n={};for(const s in e)n[s]=e[s];return delete n[t[0]],n}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const n={};for(const s in e)n[s]=e[s];return n}return et(e,Ut(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function Vt(e,t){return t.map(n=>n.split(".")).map(n=>[n,In(e,n)]).filter(n=>n[1]!==void 0).reduce((n,s)=>et(n,s[1],s[0]),{})}function zt(e,t){return t.map(n=>n.split(".")).reduce((n,s)=>Ut(n,s),e)}function ut(e,{storage:t,serializer:n,key:s,debug:a,pick:r,omit:l,beforeHydrate:f,afterHydrate:i},d,p=!0){try{p&&f?.(d);const c=t.getItem(s);if(c){const u=n.deserialize(c),m=r?Vt(u,r):u,w=l?zt(m,l):m;e.$patch(w)}p&&i?.(d)}catch(c){a&&console.error("[pinia-plugin-persistedstate]",c)}}function dt(e,{storage:t,serializer:n,key:s,debug:a,pick:r,omit:l}){try{const f=r?Vt(e,r):e,i=l?zt(f,l):f,d=n.serialize(i);t.setItem(s,d)}catch(f){a&&console.error("[pinia-plugin-persistedstate]",f)}}function Ln(e,t,n){const{pinia:s,store:a,options:{persist:r=n}}=e;if(!r)return;if(!(a.$id in s.state.value)){const i=s._s.get(a.$id.replace("__hot:",""));i&&Promise.resolve().then(()=>i.$persist());return}const f=(Array.isArray(r)?r:r===!0?[{}]:[r]).map(t);a.$hydrate=({runHooks:i=!0}={})=>{f.forEach(d=>{ut(a,d,e,i)})},a.$persist=()=>{f.forEach(i=>{dt(a.$state,i)})},f.forEach(i=>{ut(a,i,e),a.$subscribe((d,p)=>dt(p,i),{detached:!0})})}function Tn(e={}){return function(t){Ln(t,n=>({key:(e.key?e.key:s=>s)(n.key??t.store.$id),debug:n.debug??e.debug??!1,serializer:n.serializer??e.serializer??{serialize:s=>JSON.stringify(s),deserialize:s=>Gn(s)},storage:n.storage??e.storage??window.localStorage,beforeHydrate:n.beforeHydrate,afterHydrate:n.afterHydrate,pick:n.pick,omit:n.omit}),e.auto??!1)}}var Fn=Tn();/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const ye=typeof document<"u";function Ht(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Un(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Ht(e.default)}const N=Object.assign;function je(e,t){const n={};for(const s in t){const a=t[s];n[s]=te(a)?a.map(e):e(a)}return n}const Ee=()=>{},te=Array.isArray,Dt=/#/g,Vn=/&/g,zn=/\//g,Hn=/=/g,Dn=/\?/g,Wt=/\+/g,Wn=/%5B/g,jn=/%5D/g,jt=/%5E/g,qn=/%60/g,qt=/%7B/g,Kn=/%7C/g,Kt=/%7D/g,Qn=/%20/g;function tt(e){return encodeURI(""+e).replace(Kn,"|").replace(Wn,"[").replace(jn,"]")}function Jn(e){return tt(e).replace(qt,"{").replace(Kt,"}").replace(jt,"^")}function Ye(e){return tt(e).replace(Wt,"%2B").replace(Qn,"+").replace(Dt,"%23").replace(Vn,"%26").replace(qn,"`").replace(qt,"{").replace(Kt,"}").replace(jt,"^")}function Yn(e){return Ye(e).replace(Hn,"%3D")}function Xn(e){return tt(e).replace(Dt,"%23").replace(Dn,"%3F")}function Zn(e){return e==null?"":Xn(e).replace(zn,"%2F")}function Ce(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const es=/\/$/,ts=e=>e.replace(es,"");function qe(e,t,n="/"){let s,a={},r="",l="";const f=t.indexOf("#");let i=t.indexOf("?");return f<i&&f>=0&&(i=-1),i>-1&&(s=t.slice(0,i),r=t.slice(i+1,f>-1?f:t.length),a=e(r)),f>-1&&(s=s||t.slice(0,f),l=t.slice(f,t.length)),s=rs(s??t,n),{fullPath:s+(r&&"?")+r+l,path:s,query:a,hash:Ce(l)}}function ns(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function ft(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function ss(e,t,n){const s=t.matched.length-1,a=n.matched.length-1;return s>-1&&s===a&&be(t.matched[s],n.matched[a])&&Qt(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function be(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Qt(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!as(e[n],t[n]))return!1;return!0}function as(e,t){return te(e)?mt(e,t):te(t)?mt(t,e):e===t}function mt(e,t){return te(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function rs(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),a=s[s.length-1];(a===".."||a===".")&&s.push("");let r=n.length-1,l,f;for(l=0;l<s.length;l++)if(f=s[l],f!==".")if(f==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(l).join("/")}const ie={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Re;(function(e){e.pop="pop",e.push="push"})(Re||(Re={}));var Be;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Be||(Be={}));function os(e){if(!e)if(ye){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),ts(e)}const ls=/^[^#]+#/;function is(e,t){return e.replace(ls,"#")+t}function cs(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Le=()=>({left:window.scrollX,top:window.scrollY});function us(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),a=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!a)return;t=cs(a,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function pt(e,t){return(history.state?history.state.position-t:-1)+e}const Xe=new Map;function ds(e,t){Xe.set(e,t)}function fs(e){const t=Xe.get(e);return Xe.delete(e),t}let ms=()=>location.protocol+"//"+location.host;function Jt(e,t){const{pathname:n,search:s,hash:a}=t,r=e.indexOf("#");if(r>-1){let f=a.includes(e.slice(r))?e.slice(r).length:1,i=a.slice(f);return i[0]!=="/"&&(i="/"+i),ft(i,"")}return ft(n,e)+s+a}function ps(e,t,n,s){let a=[],r=[],l=null;const f=({state:u})=>{const m=Jt(e,location),w=n.value,B=t.value;let h=0;if(u){if(n.value=m,t.value=u,l&&l===w){l=null;return}h=B?u.position-B.position:0}else s(m);a.forEach($=>{$(n.value,w,{delta:h,type:Re.pop,direction:h?h>0?Be.forward:Be.back:Be.unknown})})};function i(){l=n.value}function d(u){a.push(u);const m=()=>{const w=a.indexOf(u);w>-1&&a.splice(w,1)};return r.push(m),m}function p(){const{history:u}=window;u.state&&u.replaceState(N({},u.state,{scroll:Le()}),"")}function c(){for(const u of r)u();r=[],window.removeEventListener("popstate",f),window.removeEventListener("beforeunload",p)}return window.addEventListener("popstate",f),window.addEventListener("beforeunload",p,{passive:!0}),{pauseListeners:i,listen:d,destroy:c}}function vt(e,t,n,s=!1,a=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:a?Le():null}}function vs(e){const{history:t,location:n}=window,s={value:Jt(e,n)},a={value:t.state};a.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(i,d,p){const c=e.indexOf("#"),u=c>-1?(n.host&&document.querySelector("base")?e:e.slice(c))+i:ms()+e+i;try{t[p?"replaceState":"pushState"](d,"",u),a.value=d}catch(m){console.error(m),n[p?"replace":"assign"](u)}}function l(i,d){const p=N({},t.state,vt(a.value.back,i,a.value.forward,!0),d,{position:a.value.position});r(i,p,!0),s.value=i}function f(i,d){const p=N({},a.value,t.state,{forward:i,scroll:Le()});r(p.current,p,!0);const c=N({},vt(s.value,i,null),{position:p.position+1},d);r(i,c,!1),s.value=i}return{location:s,state:a,push:f,replace:l}}function hs(e){e=os(e);const t=vs(e),n=ps(e,t.state,t.location,t.replace);function s(r,l=!0){l||n.pauseListeners(),history.go(r)}const a=N({location:"",base:e,go:s,createHref:is.bind(null,e)},t,n);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>t.state.value}),a}function gs(e){return typeof e=="string"||e&&typeof e=="object"}function Yt(e){return typeof e=="string"||typeof e=="symbol"}const Xt=Symbol("");var ht;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(ht||(ht={}));function _e(e,t){return N(new Error,{type:e,[Xt]:!0},t)}function se(e,t){return e instanceof Error&&Xt in e&&(t==null||!!(e.type&t))}const gt="[^/]+?",ys={sensitive:!1,strict:!1,start:!0,end:!0},bs=/[.+*?^${}()[\]/\\]/g;function _s(e,t){const n=N({},ys,t),s=[];let a=n.start?"^":"";const r=[];for(const d of e){const p=d.length?[]:[90];n.strict&&!d.length&&(a+="/");for(let c=0;c<d.length;c++){const u=d[c];let m=40+(n.sensitive?.25:0);if(u.type===0)c||(a+="/"),a+=u.value.replace(bs,"\\$&"),m+=40;else if(u.type===1){const{value:w,repeatable:B,optional:h,regexp:$}=u;r.push({name:w,repeatable:B,optional:h});const C=$||gt;if(C!==gt){m+=10;try{new RegExp(`(${C})`)}catch(W){throw new Error(`Invalid custom RegExp for param "${w}" (${C}): `+W.message)}}let A=B?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;c||(A=h&&d.length<2?`(?:/${A})`:"/"+A),h&&(A+="?"),a+=A,m+=20,h&&(m+=-8),B&&(m+=-20),C===".*"&&(m+=-50)}p.push(m)}s.push(p)}if(n.strict&&n.end){const d=s.length-1;s[d][s[d].length-1]+=.7000000000000001}n.strict||(a+="/?"),n.end?a+="$":n.strict&&!a.endsWith("/")&&(a+="(?:/|$)");const l=new RegExp(a,n.sensitive?"":"i");function f(d){const p=d.match(l),c={};if(!p)return null;for(let u=1;u<p.length;u++){const m=p[u]||"",w=r[u-1];c[w.name]=m&&w.repeatable?m.split("/"):m}return c}function i(d){let p="",c=!1;for(const u of e){(!c||!p.endsWith("/"))&&(p+="/"),c=!1;for(const m of u)if(m.type===0)p+=m.value;else if(m.type===1){const{value:w,repeatable:B,optional:h}=m,$=w in d?d[w]:"";if(te($)&&!B)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const C=te($)?$.join("/"):$;if(!C)if(h)u.length<2&&(p.endsWith("/")?p=p.slice(0,-1):c=!0);else throw new Error(`Missing required param "${w}"`);p+=C}}return p||"/"}return{re:l,score:s,keys:r,parse:f,stringify:i}}function Ss(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Zt(e,t){let n=0;const s=e.score,a=t.score;for(;n<s.length&&n<a.length;){const r=Ss(s[n],a[n]);if(r)return r;n++}if(Math.abs(a.length-s.length)===1){if(yt(s))return 1;if(yt(a))return-1}return a.length-s.length}function yt(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Ps={type:0,value:""},ws=/[a-zA-Z0-9_]/;function ks(e){if(!e)return[[]];if(e==="/")return[[Ps]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${n})/"${d}": ${m}`)}let n=0,s=n;const a=[];let r;function l(){r&&a.push(r),r=[]}let f=0,i,d="",p="";function c(){d&&(n===0?r.push({type:0,value:d}):n===1||n===2||n===3?(r.length>1&&(i==="*"||i==="+")&&t(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:d,regexp:p,repeatable:i==="*"||i==="+",optional:i==="*"||i==="?"})):t("Invalid state to consume buffer"),d="")}function u(){d+=i}for(;f<e.length;){if(i=e[f++],i==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:i==="/"?(d&&c(),l()):i===":"?(c(),n=1):u();break;case 4:u(),n=s;break;case 1:i==="("?n=2:ws.test(i)?u():(c(),n=0,i!=="*"&&i!=="?"&&i!=="+"&&f--);break;case 2:i===")"?p[p.length-1]=="\\"?p=p.slice(0,-1)+i:n=3:p+=i;break;case 3:c(),n=0,i!=="*"&&i!=="?"&&i!=="+"&&f--,p="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${d}"`),c(),l(),a}function Es(e,t,n){const s=_s(ks(e.path),n),a=N(s,{record:e,parent:t,children:[],alias:[]});return t&&!a.record.aliasOf==!t.record.aliasOf&&t.children.push(a),a}function Bs(e,t){const n=[],s=new Map;t=Pt({strict:!1,end:!0,sensitive:!1},t);function a(c){return s.get(c)}function r(c,u,m){const w=!m,B=_t(c);B.aliasOf=m&&m.record;const h=Pt(t,c),$=[B];if("alias"in c){const W=typeof c.alias=="string"?[c.alias]:c.alias;for(const L of W)$.push(_t(N({},B,{components:m?m.record.components:B.components,path:L,aliasOf:m?m.record:B})))}let C,A;for(const W of $){const{path:L}=W;if(u&&L[0]!=="/"){const Q=u.record.path,_=Q[Q.length-1]==="/"?"":"/";W.path=u.record.path+(L&&_+L)}if(C=Es(W,u,h),m?m.alias.push(C):(A=A||C,A!==C&&A.alias.push(C),w&&c.name&&!St(C)&&l(c.name)),en(C)&&i(C),B.children){const Q=B.children;for(let _=0;_<Q.length;_++)r(Q[_],C,m&&m.children[_])}m=m||C}return A?()=>{l(A)}:Ee}function l(c){if(Yt(c)){const u=s.get(c);u&&(s.delete(c),n.splice(n.indexOf(u),1),u.children.forEach(l),u.alias.forEach(l))}else{const u=n.indexOf(c);u>-1&&(n.splice(u,1),c.record.name&&s.delete(c.record.name),c.children.forEach(l),c.alias.forEach(l))}}function f(){return n}function i(c){const u=Rs(c,n);n.splice(u,0,c),c.record.name&&!St(c)&&s.set(c.record.name,c)}function d(c,u){let m,w={},B,h;if("name"in c&&c.name){if(m=s.get(c.name),!m)throw _e(1,{location:c});h=m.record.name,w=N(bt(u.params,m.keys.filter(A=>!A.optional).concat(m.parent?m.parent.keys.filter(A=>A.optional):[]).map(A=>A.name)),c.params&&bt(c.params,m.keys.map(A=>A.name))),B=m.stringify(w)}else if(c.path!=null)B=c.path,m=n.find(A=>A.re.test(B)),m&&(w=m.parse(B),h=m.record.name);else{if(m=u.name?s.get(u.name):n.find(A=>A.re.test(u.path)),!m)throw _e(1,{location:c,currentLocation:u});h=m.record.name,w=N({},u.params,c.params),B=m.stringify(w)}const $=[];let C=m;for(;C;)$.unshift(C.record),C=C.parent;return{name:h,path:B,params:w,matched:$,meta:Cs($)}}e.forEach(c=>r(c));function p(){n.length=0,s.clear()}return{addRoute:r,resolve:d,removeRoute:l,clearRoutes:p,getRoutes:f,getRecordMatcher:a}}function bt(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function _t(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:$s(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function $s(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function St(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Cs(e){return e.reduce((t,n)=>N(t,n.meta),{})}function Pt(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function Rs(e,t){let n=0,s=t.length;for(;n!==s;){const r=n+s>>1;Zt(e,t[r])<0?s=r:n=r+1}const a=As(e);return a&&(s=t.lastIndexOf(a,s-1)),s}function As(e){let t=e;for(;t=t.parent;)if(en(t)&&Zt(e,t)===0)return t}function en({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Os(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let a=0;a<s.length;++a){const r=s[a].replace(Wt," "),l=r.indexOf("="),f=Ce(l<0?r:r.slice(0,l)),i=l<0?null:Ce(r.slice(l+1));if(f in t){let d=t[f];te(d)||(d=t[f]=[d]),d.push(i)}else t[f]=i}return t}function wt(e){let t="";for(let n in e){const s=e[n];if(n=Yn(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(te(s)?s.map(r=>r&&Ye(r)):[s&&Ye(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function xs(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=te(s)?s.map(a=>a==null?null:""+a):s==null?s:""+s)}return t}const Ns=Symbol(""),kt=Symbol(""),Te=Symbol(""),tn=Symbol(""),Ze=Symbol("");function Pe(){let e=[];function t(s){return e.push(s),()=>{const a=e.indexOf(s);a>-1&&e.splice(a,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function ue(e,t,n,s,a,r=l=>l()){const l=s&&(s.enterCallbacks[a]=s.enterCallbacks[a]||[]);return()=>new Promise((f,i)=>{const d=u=>{u===!1?i(_e(4,{from:n,to:t})):u instanceof Error?i(u):gs(u)?i(_e(2,{from:t,to:u})):(l&&s.enterCallbacks[a]===l&&typeof u=="function"&&l.push(u),f())},p=r(()=>e.call(s&&s.instances[a],t,n,d));let c=Promise.resolve(p);e.length<3&&(c=c.then(d)),c.catch(u=>i(u))})}function Ke(e,t,n,s,a=r=>r()){const r=[];for(const l of e)for(const f in l.components){let i=l.components[f];if(!(t!=="beforeRouteEnter"&&!l.instances[f]))if(Ht(i)){const p=(i.__vccOpts||i)[t];p&&r.push(ue(p,n,s,l,f,a))}else{let d=i();r.push(()=>d.then(p=>{if(!p)throw new Error(`Couldn't resolve component "${f}" at "${l.path}"`);const c=Un(p)?p.default:p;l.mods[f]=p,l.components[f]=c;const m=(c.__vccOpts||c)[t];return m&&ue(m,n,s,l,f,a)()}))}}return r}function Et(e){const t=ve(Te),n=ve(tn),s=E(()=>{const i=re(e.to);return t.resolve(i)}),a=E(()=>{const{matched:i}=s.value,{length:d}=i,p=i[d-1],c=n.matched;if(!p||!c.length)return-1;const u=c.findIndex(be.bind(null,p));if(u>-1)return u;const m=Bt(i[d-2]);return d>1&&Bt(p)===m&&c[c.length-1].path!==m?c.findIndex(be.bind(null,i[d-2])):u}),r=E(()=>a.value>-1&&Ts(n.params,s.value.params)),l=E(()=>a.value>-1&&a.value===n.matched.length-1&&Qt(n.params,s.value.params));function f(i={}){if(Ls(i)){const d=t[re(e.replace)?"replace":"push"](re(e.to)).catch(Ee);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:s,href:E(()=>s.value.href),isActive:r,isExactActive:l,navigate:f}}function Ms(e){return e.length===1?e[0]:e}const Gs=X({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Et,setup(e,{slots:t}){const n=Ot(Et(e)),{options:s}=ve(Te),a=E(()=>({[$t(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[$t(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&Ms(t.default(n));return e.custom?r:Nt("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:a.value},r)}}}),Is=Gs;function Ls(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Ts(e,t){for(const n in t){const s=t[n],a=e[n];if(typeof s=="string"){if(s!==a)return!1}else if(!te(a)||a.length!==s.length||s.some((r,l)=>r!==a[l]))return!1}return!0}function Bt(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const $t=(e,t,n)=>e??t??n,Fs=X({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=ve(Ze),a=E(()=>e.route||s.value),r=ve(kt,0),l=E(()=>{let d=re(r);const{matched:p}=a.value;let c;for(;(c=p[d])&&!c.components;)d++;return d}),f=E(()=>a.value.matched[l.value]);De(kt,E(()=>l.value+1)),De(Ns,f),De(Ze,a);const i=U();return fe(()=>[i.value,f.value,e.name],([d,p,c],[u,m,w])=>{p&&(p.instances[c]=d,m&&m!==p&&d&&d===u&&(p.leaveGuards.size||(p.leaveGuards=m.leaveGuards),p.updateGuards.size||(p.updateGuards=m.updateGuards))),d&&p&&(!m||!be(p,m)||!u)&&(p.enterCallbacks[c]||[]).forEach(B=>B(d))},{flush:"post"}),()=>{const d=a.value,p=e.name,c=f.value,u=c&&c.components[p];if(!u)return Ct(n.default,{Component:u,route:d});const m=c.props[p],w=m?m===!0?d.params:typeof m=="function"?m(d):m:null,h=Nt(u,N({},w,t,{onVnodeUnmounted:$=>{$.component.isUnmounted&&(c.instances[p]=null)},ref:i}));return Ct(n.default,{Component:h,route:d})||h}}});function Ct(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const nn=Fs;function Us(e){const t=Bs(e.routes,e),n=e.parseQuery||Os,s=e.stringifyQuery||wt,a=e.history,r=Pe(),l=Pe(),f=Pe(),i=fn(ie);let d=ie;ye&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const p=je.bind(null,v=>""+v),c=je.bind(null,Zn),u=je.bind(null,Ce);function m(v,b){let g,k;return Yt(v)?(g=t.getRecordMatcher(v),k=b):k=v,t.addRoute(k,g)}function w(v){const b=t.getRecordMatcher(v);b&&t.removeRoute(b)}function B(){return t.getRoutes().map(v=>v.record)}function h(v){return!!t.getRecordMatcher(v)}function $(v,b){if(b=N({},b||i.value),typeof v=="string"){const R=qe(n,v,b.path),D=t.resolve({path:R.path},b),Se=a.createHref(R.fullPath);return N(R,D,{params:u(D.params),hash:Ce(R.hash),redirectedFrom:void 0,href:Se})}let g;if(v.path!=null)g=N({},v,{path:qe(n,v.path,b.path).path});else{const R=N({},v.params);for(const D in R)R[D]==null&&delete R[D];g=N({},v,{params:c(R)}),b.params=c(b.params)}const k=t.resolve(g,b),I=v.hash||"";k.params=p(u(k.params));const H=ns(s,N({},v,{hash:Jn(I),path:k.path})),O=a.createHref(H);return N({fullPath:H,hash:I,query:s===wt?xs(v.query):v.query||{}},k,{redirectedFrom:void 0,href:O})}function C(v){return typeof v=="string"?qe(n,v,i.value.path):N({},v)}function A(v,b){if(d!==v)return _e(8,{from:b,to:v})}function W(v){return _(v)}function L(v){return W(N(C(v),{replace:!0}))}function Q(v){const b=v.matched[v.matched.length-1];if(b&&b.redirect){const{redirect:g}=b;let k=typeof g=="function"?g(v):g;return typeof k=="string"&&(k=k.includes("?")||k.includes("#")?k=C(k):{path:k},k.params={}),N({query:v.query,hash:v.hash,params:k.path!=null?{}:v.params},k)}}function _(v,b){const g=d=$(v),k=i.value,I=v.state,H=v.force,O=v.replace===!0,R=Q(g);if(R)return _(N(C(R),{state:typeof R=="object"?N({},I,R.state):I,force:H,replace:O}),b||g);const D=g;D.redirectedFrom=b;let Se;return!H&&ss(s,k,g)&&(Se=_e(16,{to:D,from:k}),st(k,k,!0,!1)),(Se?Promise.resolve(Se):V(D,k)).catch(q=>se(q)?se(q,2)?q:Ve(q):j(q,D,k)).then(q=>{if(q){if(se(q,2))return _(N({replace:O},C(q.to),{state:typeof q.to=="object"?N({},I,q.to.state):I,force:H}),b||D)}else q=ne(D,k,!0,O,I);return Z(D,k,q),q})}function y(v,b){const g=A(v,b);return g?Promise.reject(g):Promise.resolve()}function S(v){const b=Ae.values().next().value;return b&&typeof b.runWithContext=="function"?b.runWithContext(v):v()}function V(v,b){let g;const[k,I,H]=Vs(v,b);g=Ke(k.reverse(),"beforeRouteLeave",v,b);for(const R of k)R.leaveGuards.forEach(D=>{g.push(ue(D,v,b))});const O=y.bind(null,v,b);return g.push(O),he(g).then(()=>{g=[];for(const R of r.list())g.push(ue(R,v,b));return g.push(O),he(g)}).then(()=>{g=Ke(I,"beforeRouteUpdate",v,b);for(const R of I)R.updateGuards.forEach(D=>{g.push(ue(D,v,b))});return g.push(O),he(g)}).then(()=>{g=[];for(const R of H)if(R.beforeEnter)if(te(R.beforeEnter))for(const D of R.beforeEnter)g.push(ue(D,v,b));else g.push(ue(R.beforeEnter,v,b));return g.push(O),he(g)}).then(()=>(v.matched.forEach(R=>R.enterCallbacks={}),g=Ke(H,"beforeRouteEnter",v,b,S),g.push(O),he(g))).then(()=>{g=[];for(const R of l.list())g.push(ue(R,v,b));return g.push(O),he(g)}).catch(R=>se(R,8)?R:Promise.reject(R))}function Z(v,b,g){f.list().forEach(k=>S(()=>k(v,b,g)))}function ne(v,b,g,k,I){const H=A(v,b);if(H)return H;const O=b===ie,R=ye?history.state:{};g&&(k||O?a.replace(v.fullPath,N({scroll:O&&R&&R.scroll},I)):a.push(v.fullPath,I)),i.value=v,st(v,b,g,O),Ve()}let ee;function P(){ee||(ee=a.listen((v,b,g)=>{if(!at.listening)return;const k=$(v),I=Q(k);if(I){_(N(I,{replace:!0,force:!0}),k).catch(Ee);return}d=k;const H=i.value;ye&&ds(pt(H.fullPath,g.delta),Le()),V(k,H).catch(O=>se(O,12)?O:se(O,2)?(_(N(C(O.to),{force:!0}),k).then(R=>{se(R,20)&&!g.delta&&g.type===Re.pop&&a.go(-1,!1)}).catch(Ee),Promise.reject()):(g.delta&&a.go(-g.delta,!1),j(O,k,H))).then(O=>{O=O||ne(k,H,!1),O&&(g.delta&&!se(O,8)?a.go(-g.delta,!1):g.type===Re.pop&&se(O,20)&&a.go(-1,!1)),Z(k,H,O)}).catch(Ee)}))}let F=Pe(),z=Pe(),T;function j(v,b,g){Ve(v);const k=z.list();return k.length?k.forEach(I=>I(v,b,g)):console.error(v),Promise.reject(v)}function Ue(){return T&&i.value!==ie?Promise.resolve():new Promise((v,b)=>{F.add([v,b])})}function Ve(v){return T||(T=!v,P(),F.list().forEach(([b,g])=>v?g(v):b()),F.reset()),v}function st(v,b,g,k){const{scrollBehavior:I}=e;if(!ye||!I)return Promise.resolve();const H=!g&&fs(pt(v.fullPath,0))||(k||!g)&&history.state&&history.state.scroll||null;return Ne().then(()=>I(v,b,H)).then(O=>O&&us(O)).catch(O=>j(O,v,b))}const ze=v=>a.go(v);let He;const Ae=new Set,at={currentRoute:i,listening:!0,addRoute:m,removeRoute:w,clearRoutes:t.clearRoutes,hasRoute:h,getRoutes:B,resolve:$,options:e,push:W,replace:L,go:ze,back:()=>ze(-1),forward:()=>ze(1),beforeEach:r.add,beforeResolve:l.add,afterEach:f.add,onError:z.add,isReady:Ue,install(v){const b=this;v.component("RouterLink",Is),v.component("RouterView",nn),v.config.globalProperties.$router=b,Object.defineProperty(v.config.globalProperties,"$route",{enumerable:!0,get:()=>re(i)}),ye&&!He&&i.value===ie&&(He=!0,W(a.location).catch(I=>{}));const g={};for(const I in ie)Object.defineProperty(g,I,{get:()=>i.value[I],enumerable:!0});v.provide(Te,b),v.provide(tn,mn(g)),v.provide(Ze,i);const k=v.unmount;Ae.add(v),v.unmount=function(){Ae.delete(v),Ae.size<1&&(d=ie,ee&&ee(),ee=null,i.value=ie,He=!1,T=!1),k()}}};function he(v){return v.reduce((b,g)=>b.then(()=>S(g)),Promise.resolve())}return at}function Vs(e,t){const n=[],s=[],a=[],r=Math.max(t.matched.length,e.matched.length);for(let l=0;l<r;l++){const f=t.matched[l];f&&(e.matched.find(d=>be(d,f))?s.push(f):n.push(f));const i=e.matched[l];i&&(t.matched.find(d=>be(d,i))||a.push(i))}return[n,s,a]}function Fe(){return ve(Te)}const we=[{id:"battlefield",name:"Battlefield",imageUrl:"/assets/stages/battlefield.png",isLegal:!0},{id:"final-destination",name:"Final Destination",imageUrl:"/assets/stages/final-destination.png",isLegal:!0},{id:"small-battlefield",name:"Small Battlefield",imageUrl:"/assets/stages/small-battlefield.png",isLegal:!0},{id:"pokemon-stadium-2",name:"Pokémon Stadium 2",imageUrl:"/assets/stages/pokemon-stadium-2.png",isLegal:!0},{id:"smashville",name:"Smashville",imageUrl:"/assets/stages/smashville.png",isLegal:!0},{id:"town-and-city",name:"Town and City",imageUrl:"/assets/stages/town-and-city.png",isLegal:!0},{id:"kalos-pokemon-league",name:"Kalos Pokémon League",imageUrl:"/assets/stages/kalos-pokemon-league.png",isLegal:!0},{id:"hollow-bastion",name:"Hollow Bastion",imageUrl:"/assets/stages/hollow-bastion.png",isLegal:!0},{id:"yoshis-story",name:"Yoshi's Story",imageUrl:"/assets/stages/yoshis-story.png",isLegal:!0}];class J{static getAllStages(){return[...we]}static getStageById(t){return we.find(n=>n.id===t)}static getAvailableStages(t){return we.filter(n=>!t.includes(n.id))}static getBannedStages(t){return we.filter(n=>t.includes(n.id))}static getGame1BanCount(){return 7}static getGames2PlusBanCount(){return 3}static getStagesAvailableForSelection(t){return t===1?2:6}static updateStageImages(t){we.forEach(n=>{t[n.id]&&(n.imageUrl=t[n.id])})}}class ae{static calculateGame1BanOrder(t){const n=1-t;return[t,t,t,n,n,n,n]}static calculateGames2PlusBanOrder(t){return[t,t,t]}static getCurrentBanPhase(t){const n=t.currentGame===1?J.getGame1BanCount():J.getGames2PlusBanCount(),s=t.currentBanIndex,a=n-s;let r;return s<n?r="banning":r="selecting",{currentPlayer:t.banOrder[s]||0,remainingBans:a,totalBans:n,phase:r}}static canBanStage(t,n){if(t.currentPhase!=="banning"||t.stageBans.has(n))return!1;const s=t.currentBanIndex;return s>=t.banOrder.length?!1:t.banOrder[s]===t.banOrder[s]}static canUnbanStage(t,n){if(t.currentPhase!=="banning"||!t.stageBans.has(n))return!1;const s=t.currentBanIndex;if(s>=t.banOrder.length)return!1;const a=t.banOrder[s],r=t.stageBans.get(n);return!(r===void 0||r!==a)}static canSelectStage(t,n){return!(t.currentPhase!=="selecting"||t.stageBans.has(n)||t.selectedStage===n)}static banStage(t,n){if(!this.canBanStage(t,n))throw new Error(`Cannot ban stage ${n} at this time`);const s=t.currentBanIndex,a=t.banOrder[s],r=new Map(t.stageBans);r.set(n,a);const l=t.currentGame===1?J.getGame1BanCount():J.getGames2PlusBanCount();let f=t.currentPhase;return r.size>=l&&(f="selecting"),{...t,stageBans:r,currentBanIndex:s+1,currentPhase:f}}static selectStage(t,n){if(!this.canSelectStage(t,n))throw new Error(`Cannot select stage ${n} at this time`);return{...t,selectedStage:n,currentPhase:"winner-select"}}static getAvailableStagesForSelection(t){const n=Array.from(t.stageBans.keys());return J.getAvailableStages(n).map(s=>s.id)}static isReadyForSelection(t){const n=t.currentGame===1?J.getGame1BanCount():J.getGames2PlusBanCount();return t.stageBans.size>=n}static getStageSelector(t){return t.currentGame===1?t.banOrder[0]:1-(t.players[0].score>t.players[1].score?0:1)}}const oe=Rn("game",()=>{const e=U([{id:0,name:"Player 1",score:0},{id:1,name:"Player 2",score:0}]),t=U("BO3"),n=U(1),s=U("setup"),a=U([]),r=U(0),l=U(new Map),f=U(null),i=U(!1),d=U([]);fe(l,P=>{P instanceof Map||(console.warn("stageBans was not a Map, fixing..."),Array.isArray(P)?l.value=new Map(P):l.value=new Map)},{immediate:!0}),fe(()=>e.value.map(P=>P.score),(P,F)=>{if(console.log("Score watcher triggered:",{newScores:P,oldScores:F,currentPhase:s.value}),s.value==="set-complete"){console.log("Skipping - already complete");return}if(!F||F.every(j=>j===0)&&P.every(j=>j===0)){console.log("Skipping - initial setup");return}if(d.value.length===0&&P.some(j=>j>0)){console.log("Skipping - state restoration");return}if(F===void 0){console.log("Skipping - first run");return}const z=t.value==="BO3"?2:3,T=P.some(j=>j>=z);console.log(`Checking for winner: threshold=${z}, hasWinner=${T}`),T&&(console.log(`Match ended: Player reached winning threshold (${z})`),console.log(`Current phase before change: ${s.value}`),s.value="set-complete",console.log(`Current phase after change: ${s.value}`))},{deep:!0});const p=E(()=>s.value!=="banning"||r.value>=a.value.length?null:e.value[a.value[r.value]]),c=E(()=>{const P=t.value==="BO3"?2:3;return e.value.some(F=>F.score>=P)}),u=E(()=>c.value&&e.value.find(P=>{const F=t.value==="BO3"?2:3;return P.score>=F})||null),m=E(()=>{const P=Array.from(l.value.keys());return J.getAvailableStages(P)}),w=E(()=>{const P=Array.from(l.value.keys());return J.getBannedStages(P)}),B=E(()=>ae.getCurrentBanPhase({players:e.value,matchFormat:t.value,currentGame:n.value,currentPhase:s.value,banOrder:a.value,currentBanIndex:r.value,stageBans:l.value,selectedStage:f.value,gentlemansAgreement:i.value,gameHistory:d.value})),h=E(()=>ae.isReadyForSelection({players:e.value,matchFormat:t.value,currentGame:n.value,currentPhase:s.value,banOrder:a.value,currentBanIndex:r.value,stageBans:l.value,selectedStage:f.value,gentlemansAgreement:i.value,gameHistory:d.value}));function $(P){e.value=[{id:0,name:P.player1Name,score:0},{id:1,name:P.player2Name,score:0}],t.value=P.matchFormat,n.value=1,i.value=P.gentlemansAgreement,P.gentlemansAgreement?(s.value="selecting",a.value=[],r.value=0):(s.value="banning",a.value=ae.calculateGame1BanOrder(P.firstBan),r.value=0),l.value.clear(),f.value=null,d.value=[]}function C(P){if(!ae.canBanStage({players:e.value,matchFormat:t.value,currentGame:n.value,currentPhase:s.value,banOrder:a.value,currentBanIndex:r.value,stageBans:l.value,selectedStage:f.value,gentlemansAgreement:i.value,gameHistory:d.value},P))throw new Error(`Cannot ban stage ${P} at this time`);const F=a.value[r.value];l.value.set(P,F),r.value++;const z=n.value===1?J.getGame1BanCount():J.getGames2PlusBanCount();l.value.size>=z&&(s.value="selecting")}function A(P){if(!ae.canUnbanStage({players:e.value,matchFormat:t.value,currentGame:n.value,currentPhase:s.value,banOrder:a.value,currentBanIndex:r.value,stageBans:l.value,selectedStage:f.value,gentlemansAgreement:i.value,gameHistory:d.value},P))throw new Error(`Cannot unban stage ${P} at this time`);l.value.delete(P),r.value--,s.value="banning"}function W(P){if(!ae.canSelectStage({players:e.value,matchFormat:t.value,currentGame:n.value,currentPhase:s.value,banOrder:a.value,currentBanIndex:r.value,stageBans:l.value,selectedStage:f.value,gentlemansAgreement:i.value,gameHistory:d.value},P))throw new Error(`Cannot select stage ${P} at this time`);f.value=P,s.value="winner-select"}function L(P){e.value[P].score++;const F={gameNumber:n.value,winner:P,selectedStage:f.value,stageBans:Array.from(l.value.entries()).map(([z,T])=>({stageId:z,playerIndex:T}))};if(d.value.push(F),c.value){s.value="set-complete";return}if(n.value++,l.value.clear(),f.value=null,r.value=0,i.value)s.value="selecting",a.value=[];else{const z=P;a.value=ae.calculateGames2PlusBanOrder(z),s.value="banning"}}function Q(){e.value=[{id:0,name:e.value[0].name,score:0},{id:1,name:e.value[1].name,score:0}],n.value=1,s.value="setup",a.value=[],r.value=0,l.value.clear(),f.value=null,d.value=[]}function _(){s.value="setup",a.value=[],r.value=0,l.value.clear(),f.value=null}function y(P,F){P>=0&&P<e.value.length&&(e.value[P].name=F)}function S(P,F){if(P>=0&&P<e.value.length){const z=Math.max(0,F),T=t.value==="BO3"?2:3,j=Math.min(z,T),Ue=e.value[P].score;e.value[P].score=j,console.log(`Score updated: Player ${P} ${Ue} → ${j} (${t.value})`)}}function V(){i.value=!0,s.value="selecting",l.value.clear(),a.value=[],r.value=0}function Z(){if(i.value=!1,s.value="banning",l.value.clear(),n.value===1)a.value=ae.calculateGame1BanOrder(0);else if(d.value.length>0){const P=d.value[d.value.length-1];a.value=ae.calculateGames2PlusBanOrder(P.winner)}else a.value=[0,1];r.value=0}function ne(){l.value.clear(),r.value=0,s.value==="selecting"&&(s.value="banning")}function ee(){l.value instanceof Map||(console.warn("stageBans was not a Map after restoration, fixing..."),Array.isArray(l.value)?l.value=new Map(l.value):l.value=new Map),Array.isArray(a.value)||(console.warn("banOrder was not an array after restoration, fixing..."),a.value=[]),typeof r.value!="number"&&(console.warn("currentBanIndex was not a number after restoration, fixing..."),r.value=0),["setup","banning","selecting","winner-select","set-complete"].includes(s.value)||(console.warn("currentPhase was invalid after restoration, fixing..."),s.value="setup"),typeof n.value!="number"&&(console.warn("currentGame was not a number after restoration, fixing..."),n.value=1),(!Array.isArray(e.value)||e.value.length!==2)&&(console.warn("players array was invalid after restoration, fixing..."),e.value=[{id:0,name:"Player 1",score:0},{id:1,name:"Player 2",score:0}]),Array.isArray(d.value)||(console.warn("gameHistory was not an array after restoration, fixing..."),d.value=[]),typeof i.value!="boolean"&&(console.warn("gentlemansAgreement was not a boolean after restoration, fixing..."),i.value=!1),["BO3","BO5"].includes(t.value)||(console.warn("matchFormat was invalid after restoration, fixing..."),t.value="BO3"),f.value!==null&&typeof f.value!="string"&&(console.warn("selectedStage was invalid after restoration, fixing..."),f.value=null),console.log("Store state validated and fixed after restoration:",{currentPhase:s.value,currentGame:n.value,currentBanIndex:r.value,banOrder:a.value,stageBansSize:l.value.size,players:e.value,gentlemansAgreement:i.value})}return{players:e,matchFormat:t,currentGame:n,currentPhase:s,banOrder:a,currentBanIndex:r,stageBans:l,selectedStage:f,gentlemansAgreement:i,gameHistory:d,currentPlayer:p,isSetComplete:c,setWinner:u,remainingStages:m,bannedStages:w,currentBanPhase:B,isReadyForSelection:h,setupMatch:$,banStage:C,unbanStage:A,selectStage:W,declareWinner:L,resetMatch:Q,resetToSetup:_,updatePlayerName:y,updatePlayerScore:S,enableGentlemansAgreement:V,disableGentlemansAgreement:Z,clearBans:ne,validateRestoredState:ee}},{persist:{key:"smash-eu-game-state",storage:localStorage,serializer:{serialize:e=>{const t={...e};return t.stageBans instanceof Map&&(t.stageBans=Array.from(t.stageBans.entries())),JSON.stringify(t)},deserialize:e=>{const t=JSON.parse(e);return t.stageBans&&Array.isArray(t.stageBans)&&(t.stageBans=new Map(t.stageBans)),t}}}}),sn=Object.freeze(Object.defineProperty({__proto__:null,useGameStore:oe},Symbol.toStringTag,{value:"Module"})),zs={key:0,class:"session-recovery-notification"},Hs=X({__name:"SessionRecoveryNotification",setup(e){const t=oe(),n=Fe(),s=U(!1);pn(()=>{console.log("SessionRecoveryNotification mounted, currentPhase:",t.currentPhase),t.currentPhase!=="setup"&&(console.log("Showing session recovery notification"),s.value=!0,setTimeout(()=>{console.log("Auto-navigating to appropriate view, currentPhase:",t.currentPhase),t.currentPhase==="set-complete"?n.push("/set-complete"):t.currentPhase!=="setup"&&n.push("/game")},100))}),fe(()=>t.currentPhase,f=>{f!=="setup"&&s.value&&(f==="set-complete"?n.push("/set-complete"):n.push("/game"))});function a(){s.value=!1}function r(){a(),t.currentPhase==="set-complete"?n.push("/set-complete"):n.push("/game")}function l(){t.resetMatch(),a(),n.push("/")}return(f,i)=>s.value?(x(),M("div",zs,[o("div",{class:"notification is-info"},[o("button",{class:"delete",onClick:a}),i[0]||(i[0]=o("p",null,"Previous session recovered. Would you like to continue or start a new match?",-1)),o("div",{class:"buttons"},[o("button",{class:"button is-primary",onClick:r},"Continue"),o("button",{class:"button is-danger",onClick:l},"New Match")])])])):K("",!0)}}),le=(e,t)=>{const n=e.__vccOpts||e;for(const[s,a]of t)n[s]=a;return n},Ds=le(Hs,[["__scopeId","data-v-9b88f654"]]),Ws={id:"app"},js=X({__name:"App",setup(e){const t=n=>{switch(n){case"home":return"page";case"game":return"slide";case"set-complete":return"fade";default:return"fade"}};return(n,s)=>(x(),M("div",Ws,[s[0]||(s[0]=Mt('<div class="dust-particles"><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div><div class="dust-particle"></div></div>',1)),de(Ds),de(re(nn),null,{default:$e(({Component:a,route:r})=>[de(Me,{name:t(r.name),mode:"out-in"},{default:$e(()=>[(x(),Ge(vn(a),{key:r.path}))]),_:2},1032,["name"])]),_:1})]))}}),qs={class:"modal-content"},Ks={class:"modal-box glass-card"},Qs={class:"form-section"},Js={class:"player-fields"},Ys={class:"field"},Xs={class:"control"},Zs={key:0,class:"help is-danger"},ea={class:"field"},ta={class:"control"},na={class:"form-section"},sa={class:"config-fields"},aa={class:"field"},ra={class:"radio-group"},oa={class:"radio-option"},la={class:"radio-option"},ia={class:"field"},ca={class:"radio-group"},ua={class:"radio-option"},da={class:"radio-text"},fa={class:"radio-option"},ma={class:"radio-text"},pa={class:"field"},va={class:"checkbox-label"},ha={class:"form-actions"},ga=["disabled"],ya=X({__name:"SetupModal",props:{isOpen:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const n=t,s=oe(),a=Fe(),r=U("Player 1"),l=U("Player 2"),f=U("BO3"),i=U(0),d=U(!1),p=U(""),c=E(()=>r.value.trim()!==""&&l.value.trim()!==""&&r.value.trim()!==l.value.trim()&&p.value==="");fe([r,l],()=>{u()});function u(){const B=r.value.trim(),h=l.value.trim();if(B===""||h===""){p.value="";return}B===h?p.value="Player names must be different":p.value=""}function m(){n("close")}function w(){if(c.value)try{s.setupMatch({player1Name:r.value.trim(),player2Name:l.value.trim(),matchFormat:f.value,firstBan:i.value,gentlemansAgreement:d.value}),m(),a.push("/game")}catch(B){console.error("Error setting up match:",B)}}return(B,h)=>(x(),Ge(Me,{name:"modal"},{default:$e(()=>[o("div",{class:pe(["modal",{"is-active":B.isOpen}])},[o("div",{class:"modal-background",onClick:m}),o("div",qs,[o("div",Ks,[h[25]||(h[25]=o("div",{class:"modal-header"},[o("h2",{class:"modal-title"},"Match Setup"),o("div",{class:"setup-icon"},"⚔️")],-1)),o("form",{onSubmit:hn(w,["prevent"]),class:"setup-form"},[o("div",Qs,[h[9]||(h[9]=o("h3",{class:"section-title"},"Player Information",-1)),o("div",Js,[o("div",Ys,[h[7]||(h[7]=o("label",{class:"label"},[o("span",{class:"label-icon"},"👤"),Y(" Player 1 Name ")],-1)),o("div",Xs,[me(o("input",{class:"input",type:"text","onUpdate:modelValue":h[0]||(h[0]=$=>r.value=$),required:"",maxlength:"20",onInput:u,placeholder:"Enter Player 1 name"},null,544),[[rt,r.value]])]),p.value?(x(),M("p",Zs,G(p.value),1)):K("",!0)]),o("div",ea,[h[8]||(h[8]=o("label",{class:"label"},[o("span",{class:"label-icon"},"👤"),Y(" Player 2 Name ")],-1)),o("div",ta,[me(o("input",{class:"input",type:"text","onUpdate:modelValue":h[1]||(h[1]=$=>l.value=$),required:"",maxlength:"20",onInput:u,placeholder:"Enter Player 2 name"},null,544),[[rt,l.value]])])])])]),o("div",na,[h[22]||(h[22]=o("h3",{class:"section-title"},"Match Configuration",-1)),o("div",sa,[o("div",aa,[h[14]||(h[14]=o("label",{class:"label"},[o("span",{class:"label-icon"},"🏆"),Y(" Match Format ")],-1)),o("div",ra,[o("label",oa,[me(o("input",{type:"radio","onUpdate:modelValue":h[2]||(h[2]=$=>f.value=$),value:"BO3"},null,512),[[Oe,f.value]]),h[10]||(h[10]=o("span",{class:"radio-custom"},null,-1)),h[11]||(h[11]=o("span",{class:"radio-text"},"Best of 3",-1))]),o("label",la,[me(o("input",{type:"radio","onUpdate:modelValue":h[3]||(h[3]=$=>f.value=$),value:"BO5"},null,512),[[Oe,f.value]]),h[12]||(h[12]=o("span",{class:"radio-custom"},null,-1)),h[13]||(h[13]=o("span",{class:"radio-text"},"Best of 5",-1))])])]),o("div",ia,[h[17]||(h[17]=o("label",{class:"label"},[o("span",{class:"label-icon"},"✂️"),Y(" First Ban ")],-1)),o("div",ca,[o("label",ua,[me(o("input",{type:"radio","onUpdate:modelValue":h[4]||(h[4]=$=>i.value=$),value:0},null,512),[[Oe,i.value]]),h[15]||(h[15]=o("span",{class:"radio-custom"},null,-1)),o("span",da,G(r.value||"Player 1"),1)]),o("label",fa,[me(o("input",{type:"radio","onUpdate:modelValue":h[5]||(h[5]=$=>i.value=$),value:1},null,512),[[Oe,i.value]]),h[16]||(h[16]=o("span",{class:"radio-custom"},null,-1)),o("span",ma,G(l.value||"Player 2"),1)])]),h[18]||(h[18]=o("p",{class:"help"},"The first player to ban stages in Game 1",-1))]),o("div",pa,[o("label",va,[me(o("input",{type:"checkbox","onUpdate:modelValue":h[6]||(h[6]=$=>d.value=$),class:"checkbox"},null,512),[[gn,d.value]]),h[19]||(h[19]=o("span",{class:"checkbox-custom"},null,-1)),h[20]||(h[20]=o("span",{class:"checkbox-text"},[o("span",{class:"label-icon"},"🤝"),Y(" Gentleman's Agreement ")],-1))]),h[21]||(h[21]=o("p",{class:"help"},"Skip the ban phase and allow direct stage selection by mutual agreement",-1))])])]),o("div",ha,[o("button",{class:"action-button primary-button",type:"submit",disabled:!c.value},[...h[23]||(h[23]=[o("span",{class:"button-icon"},"🚀",-1),Y(" Start Match ",-1)])],8,ga),o("button",{type:"button",class:"action-button secondary-button",onClick:m},[...h[24]||(h[24]=[o("span",{class:"button-icon"},"❌",-1),Y(" Cancel ",-1)])])])],32)])]),o("button",{class:"modal-close",onClick:m},[...h[26]||(h[26]=[o("span",{class:"close-icon"},"×",-1)])])],2)]),_:1}))}}),ba=le(ya,[["__scopeId","data-v-02d72f50"]]),_a={class:"home-view"},Sa=X({__name:"HomeView",setup(e){const t=U(!1),n=()=>{t.value=!0},s=()=>{t.value=!1};return(a,r)=>(x(),M("div",_a,[r[3]||(r[3]=o("div",{class:"hero-section"},[o("div",{class:"hero-content"},[o("h1",{class:"hero-title"},"EU Ruleset Ban App"),o("p",{class:"hero-subtitle"},"Ban stage selection for Super Smash Bros. Ultimate by Afro")])],-1)),o("div",{class:"setup-section glass-card"},[r[2]||(r[2]=Mt('<div class="section-header" data-v-60dda432><h2 class="section-heading" data-v-60dda432>Tournament Ruleset</h2><p class="section-description" data-v-60dda432>Official SmashEU competitive format</p></div><div class="rules-grid" data-v-60dda432><div class="rule-card" data-v-60dda432><div class="rule-icon" data-v-60dda432>⚔️</div><h3 data-v-60dda432>3 Stocks</h3><p data-v-60dda432>Standard competitive format</p></div><div class="rule-card" data-v-60dda432><div class="rule-icon" data-v-60dda432>⏱️</div><h3 data-v-60dda432>7 Minutes</h3><p data-v-60dda432>Time limit per match</p></div><div class="rule-card" data-v-60dda432><div class="rule-icon" data-v-60dda432>🎭</div><h3 data-v-60dda432>Characters First</h3><p data-v-60dda432>Select characters before stages</p></div><div class="rule-card" data-v-60dda432><div class="rule-icon" data-v-60dda432>✂️</div><h3 data-v-60dda432>RPS to Ban</h3><p data-v-60dda432>Rock, Paper, Scissors for first ban</p></div><div class="rule-card" data-v-60dda432><div class="rule-icon" data-v-60dda432>🎮</div><h3 data-v-60dda432>Game 1: 3-4-1</h3><p data-v-60dda432>3 bans, 4 bans, 1 pick</p></div><div class="rule-card" data-v-60dda432><div class="rule-icon" data-v-60dda432>🏆</div><h3 data-v-60dda432>Game 2+: Winner bans 3</h3><p data-v-60dda432>Loser picks from remaining stages</p></div></div>',2)),o("div",{class:"setup-actions"},[o("button",{onClick:n,class:"setup-button primary-button"},[...r[0]||(r[0]=[o("span",{class:"button-icon"},"🎯",-1),Y(" Start Match Setup ",-1)])]),r[1]||(r[1]=o("a",{href:"https://www.ssbwiki.com/Tournament_rulesets_(SSBU)",target:"_blank"},[o("button",{class:"rules-button secondary-button"},[o("span",{class:"button-icon"},"📖"),Y(" View Full Rules ")])],-1))])]),de(ba,{"is-open":t.value,onClose:s},null,8,["is-open"])]))}}),Pa=le(Sa,[["__scopeId","data-v-60dda432"]]),wa={class:"player-name"},ka={class:"score-controls"},Ea=["disabled"],Ba={class:"score"},$a=["disabled"],Ca={class:"match-info"},Ra={class:"game-number"},Aa={class:"match-format"},Oa={class:"player-name"},xa={class:"score-controls"},Na=["disabled"],Ma={class:"score"},Ga=["disabled"],Ia=X({__name:"ScoreBoard",setup(e){const t=oe(),n=E(()=>t.players),s=E(()=>t.currentGame),a=E(()=>t.matchFormat==="BO3"?"Best of 3":"Best of 5"),r=E(()=>t.currentPhase),l=E(()=>t.currentPlayer),f=E(()=>t.isSetComplete);function i(u){return r.value==="banning"&&l.value?.id===u}function d(u){f.value||n.value[u].score>0&&t.updatePlayerScore(u,n.value[u].score-1)}function p(u){if(f.value)return;const m=t.matchFormat==="BO3"?2:3;n.value[u].score<m&&t.updatePlayerScore(u,n.value[u].score+1)}function c(u){const m=t.matchFormat==="BO3"?2:3;return n.value[u].score>=m}return(u,m)=>(x(),M("div",{class:pe(["scoreboard",{"match-complete":f.value}])},[o("div",{class:pe(["player-score",{"is-active":i(0)}])},[o("div",wa,G(n.value[0].name),1),o("div",ka,[o("button",{class:"score-btn decrease",onClick:m[0]||(m[0]=w=>d(0)),disabled:n.value[0].score<=0||f.value,"aria-label":"Decrease score for Player 1"},[...m[4]||(m[4]=[o("span",null,"-",-1)])],8,Ea),o("div",Ba,G(n.value[0].score),1),o("button",{class:"score-btn increase",onClick:m[1]||(m[1]=w=>p(0)),disabled:c(0)||f.value,"aria-label":"Increase score for Player 1"},[...m[5]||(m[5]=[o("span",null,"+",-1)])],8,$a)])],2),o("div",Ca,[o("div",Ra,"Game "+G(s.value),1),o("div",Aa,G(a.value),1)]),o("div",{class:pe(["player-score",{"is-active":i(1)}])},[o("div",Oa,G(n.value[1].name),1),o("div",xa,[o("button",{class:"score-btn decrease",onClick:m[2]||(m[2]=w=>d(1)),disabled:n.value[1].score<=0||f.value,"aria-label":"Decrease score for Player 2"},[...m[6]||(m[6]=[o("span",null,"-",-1)])],8,Na),o("div",Ma,G(n.value[1].score),1),o("button",{class:"score-btn increase",onClick:m[3]||(m[3]=w=>p(1)),disabled:c(1)||f.value,"aria-label":"Increase score for Player 2"},[...m[7]||(m[7]=[o("span",null,"+",-1)])],8,Ga)])],2)],2))}}),La=le(Ia,[["__scopeId","data-v-88a10ef2"]]),Ta={class:"stage-grid-container"},Fa={class:"stage-grid"},Ua=["onClick","onKeydown","tabindex","aria-label","aria-disabled"],Va={class:"stage-image-container"},za=["src","alt"],Ha={class:"stage-overlay"},Da={key:0,class:"ban-indicator"},Wa={class:"ban-player"},ja={key:0,class:"unban-hint"},qa={key:1,class:"selection-indicator"},Ka={key:2,class:"action-hint"},Qa={class:"hint-icon"},Ja={key:0},Ya={key:1},Xa={key:0,class:"hint-text"},Za={key:1,class:"hint-text"},er={class:"stage-name"},tr={key:0,class:"game-status glass-card"},nr={key:0,class:"status-message"},sr={class:"status-header"},ar={class:"status-content"},rr={class:"ban-count"},or={key:1,class:"status-message"},lr={key:0,class:"gentlemans-status"},ir={key:1,class:"status-header"},cr={class:"status-content"},ur=X({__name:"StageGrid",setup(e){const t=oe(),n=E(()=>J.getAllStages()),s=E(()=>t.currentPhase),a=E(()=>t.currentPlayer),r=E(()=>t.stageBans),l=E(()=>t.selectedStage),f=E(()=>t.currentBanPhase),i=E(()=>s.value!=="banning"?!1:a.value?.id===0),d=E(()=>a.value?.name||"Unknown Player"),p=E(()=>f.value?.remainingBans||0),c=E(()=>{if(t.currentGame===1)return t.players[t.banOrder[0]||0]?.name||"Unknown Player";{const y=1-(t.players[0].score>t.players[1].score?0:1);return t.players[y]?.name||"Unknown Player"}}),u=E(()=>t.currentGame===1?t.banOrder[0]===0:(t.players[0].score>t.players[1].score?0:1)!==0),m=_=>r.value.has(_),w=(_,y)=>r.value.get(_)===y,B=_=>l.value===_,h=_=>s.value==="setup"||B(_)?!1:t.gentlemansAgreement&&s.value==="selecting"?!0:m(_)?s.value==="banning"&&t.currentBanPhase?.phase==="banning":s.value==="banning"?t.currentBanPhase?.phase==="banning":s.value==="selecting"?t.currentBanPhase?.phase==="selecting":!1,$=_=>h(_)?s.value==="banning"||s.value==="selecting":!1,C=_=>{if(s.value!=="banning"||!m(_))return!1;const y=a.value?.id;return y===void 0?!1:r.value.get(_)===y},A=_=>{const y=r.value.get(_);return y!==void 0&&t.players[y]?.name||"Unknown Player"},W=_=>{if(m(_.id)){const y=A(_.id);return C(_.id)?`${_.name}, banned by ${y}, click to unban`:`${_.name}, banned by ${y}`}return B(_.id)?`${_.name}, selected stage`:s.value==="banning"?`${_.name}, click to ban`:s.value==="selecting"?`${_.name}, click to select`:_.name},L=_=>{if(h(_))try{s.value==="banning"?m(_)?t.unbanStage(_):t.banStage(_):s.value==="selecting"&&(t.gentlemansAgreement?t.selectStage(_):m(_)||t.selectStage(_))}catch(y){console.error("Error handling stage interaction:",y)}},Q=_=>{const y=_.target;y.style.display="none";const S=y.parentElement;S&&S.classList.add("image-error")};return(_,y)=>(x(),M("div",Ta,[o("div",Fa,[(x(!0),M(yn,null,bn(n.value,S=>(x(),M("div",{key:S.id,class:pe(["stage-item",{banned:m(S.id),"banned-by-player-1":w(S.id,0),"banned-by-player-2":w(S.id,1),selected:B(S.id),interactive:h(S.id),"current-turn":$(S.id)}]),onClick:V=>L(S.id),onKeydown:[ot(V=>L(S.id),["enter"]),ot(V=>L(S.id),["space"])],role:"button",tabindex:h(S.id)?0:-1,"aria-label":W(S),"aria-disabled":!h(S.id)},[o("div",Va,[o("img",{src:S.imageUrl,alt:S.name,class:"stage-image",onError:Q},null,40,za),o("div",Ha,[m(S.id)?(x(),M("div",Da,[o("span",Wa,G(A(S.id)),1),y[0]||(y[0]=o("div",{class:"ban-icon"},"🚫",-1)),C(S.id)?(x(),M("span",ja,"Click to Unban")):K("",!0)])):B(S.id)?(x(),M("div",qa,[...y[1]||(y[1]=[o("div",{class:"selection-icon"},"✅",-1),o("span",{class:"selection-text"},"SELECTED",-1)])])):h(S.id)?(x(),M("div",Ka,[o("div",Qa,[s.value==="banning"?(x(),M("span",Ja,"🚫")):s.value==="selecting"?(x(),M("span",Ya,"🎯")):K("",!0)]),s.value==="banning"?(x(),M("span",Xa,"Click to Ban")):s.value==="selecting"?(x(),M("span",Za,"Click to Select")):K("",!0)])):K("",!0)])]),o("div",er,G(S.name),1)],42,Ua))),128))]),s.value!=="setup"?(x(),M("div",tr,[s.value==="banning"?(x(),M("div",nr,[o("div",sr,[o("div",ar,[o("span",{class:pe(["player-name",{"player-1":i.value,"player-2":!i.value}])},G(d.value),3),y[2]||(y[2]=o("span",{class:"status-text"}," is banning",-1)),o("span",rr,"("+G(p.value)+" remaining)",1),y[3]||(y[3]=o("div",{class:"status-icon banning-icon"},"🚫",-1))])])])):s.value==="selecting"?(x(),M("div",or,[re(t).gentlemansAgreement?(x(),M("div",lr,[...y[4]||(y[4]=[o("div",{class:"status-icon gentlemans-icon"},"🤝",-1),o("span",{class:"status-text"},"Gentleman's Agreement: Select any stage",-1)])])):(x(),M("div",ir,[o("div",cr,[o("span",{class:pe(["player-name",{"player-1":u.value,"player-2":!u.value}])},G(c.value),3),y[5]||(y[5]=o("span",{class:"status-text"}," is selecting a stage",-1)),y[6]||(y[6]=o("div",{class:"status-icon selecting-icon"},"🎯",-1))])]))])):K("",!0)])):K("",!0)]))}}),dr=le(ur,[["__scopeId","data-v-2ebe201e"]]),fr={key:0,class:"modal is-active"},mr={class:"modal-content"},pr={class:"modal-box glass-card"},vr={class:"modal-header"},hr={class:"modal-title"},gr={class:"game-number-badge"},yr={key:0,class:"selected-stage"},br={class:"stage-image-container"},_r=["src","alt"],Sr={class:"stage-name"},Pr={class:"winner-selection"},wr={class:"player-buttons"},kr={class:"player-name"},Er={class:"player-name"},Br=X({__name:"GameModal",props:{isOpen:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const n=t,s=oe(),a=E(()=>s.players),r=E(()=>s.currentGame),l=E(()=>s.selectedStage),f=E(()=>l.value&&J.getStageById(l.value)||null);function i(){n("close")}function d(c){s.declareWinner(c),i()}function p(c){const u=c.target;u.style.display="none"}return(c,u)=>(x(),Ge(Me,{name:"modal"},{default:$e(()=>[c.isOpen?(x(),M("div",fr,[o("div",{class:"modal-background",onClick:i}),o("div",mr,[o("div",pr,[o("div",vr,[o("h2",hr,"Game "+G(r.value)+" Result",1),o("div",gr,G(r.value),1)]),f.value?(x(),M("div",yr,[o("div",br,[o("img",{src:f.value.imageUrl,alt:f.value.name,class:"stage-image",onError:p},null,40,_r),u[2]||(u[2]=o("div",{class:"stage-overlay"},[o("div",{class:"stage-selected-badge"},[o("span",{class:"badge-icon"},"🎯"),o("span",{class:"badge-text"},"SELECTED")])],-1))]),o("h3",Sr,G(f.value.name),1)])):K("",!0),o("div",Pr,[u[7]||(u[7]=o("div",{class:"selection-header"},[o("div",{class:"selection-icon"},"🏆"),o("h3",{class:"modal-title"},"Select Winner")],-1)),o("div",wr,[o("button",{class:"player-button player-1-button",onClick:u[0]||(u[0]=m=>d(0))},[u[3]||(u[3]=o("div",{class:"player-avatar"},"👤",-1)),o("span",kr,G(a.value[0].name),1),u[4]||(u[4]=o("div",{class:"button-arrow"},"→",-1))]),o("button",{class:"player-button player-2-button",onClick:u[1]||(u[1]=m=>d(1))},[u[5]||(u[5]=o("div",{class:"player-avatar"},"👤",-1)),o("span",Er,G(a.value[1].name),1),u[6]||(u[6]=o("div",{class:"button-arrow"},"→",-1))])])])])]),o("button",{class:"modal-close",onClick:i},[...u[8]||(u[8]=[o("span",{class:"close-icon"},"×",-1)])])])):K("",!0)]),_:1}))}}),$r=le(Br,[["__scopeId","data-v-4c03eff7"]]),Cr={class:"gentlemans-agreement"},Rr={class:"checkbox"},Ar=["checked","disabled"],Or={key:0,class:"agreement-info"},xr=X({__name:"GentlemansAgreementToggle",setup(e){const t=oe(),n=E(()=>t.gentlemansAgreement),s=E(()=>["banning","selecting"].includes(t.currentPhase));function a(r){r.target.checked?t.enableGentlemansAgreement():t.disableGentlemansAgreement()}return(r,l)=>(x(),M("div",Cr,[o("label",Rr,[o("input",{type:"checkbox",checked:n.value,onChange:a,disabled:!s.value},null,40,Ar),l[0]||(l[0]=o("span",{class:"checkbox-label"},"Gentleman's Agreement (Skip Bans)",-1))]),n.value?(x(),M("div",Or,[...l[1]||(l[1]=[o("p",null,"Ban sequence bypassed. Select any stage by mutual agreement.",-1)])])):K("",!0)]))}}),Nr=le(xr,[["__scopeId","data-v-a1b7b82a"]]),Mr={class:"game-view"},Gr={class:"game-section glass-card"},Ir={key:0,class:"winner-prompt"},Lr={class:"winner-prompt-content"},Tr={class:"prompt-message"},Fr={class:"game-controls"},Ur=X({__name:"GameView",setup(e){const t=oe(),n=Fe(),s=U(!1),a=E(()=>["banning","selecting"].includes(t.currentPhase)),r=E(()=>t.currentPhase==="banning"&&t.stageBans.size>0),l=()=>{s.value=!0},f=()=>{s.value=!1},i=()=>{t.clearBans()},d=()=>{t.resetToSetup(),n.push("/")};return fe(()=>t.currentPhase,(p,c)=>{console.log(`Phase changed: ${c} → ${p}`),p==="winner-select"&&l(),p==="set-complete"&&(console.log("Navigating to set-complete page"),Ne(()=>{n.currentRoute.value.name!=="set-complete"?n.push("/set-complete").catch(u=>{console.error("Navigation failed:",u)}):console.log("Already on set-complete page")}))}),fe(()=>t.isSetComplete,p=>{console.log(`Match completion status: ${p}, current phase: ${t.currentPhase}`),p&&t.currentPhase!=="set-complete"&&(console.log("Match complete detected, navigating to set-complete page"),Ne(()=>{console.log("Executing navigation to set-complete"),n.currentRoute.value.name!=="set-complete"?n.push("/set-complete").catch(c=>{console.error("Navigation failed:",c)}):console.log("Already on set-complete page")}))}),(p,c)=>(x(),M("div",Mr,[o("div",Gr,[de(La),a.value?(x(),Ge(Nr,{key:0})):K("",!0),de(dr),de(Me,{name:"slide-fade"},{default:$e(()=>[re(t).currentPhase==="winner-select"&&!s.value?(x(),M("div",Ir,[o("div",Lr,[c[1]||(c[1]=o("div",{class:"prompt-header"},[o("div",{class:"prompt-icon"},"🎯"),o("h3",null,"Stage Selected!")],-1)),o("p",Tr,"Ready to declare the winner for Game "+G(re(t).currentGame)+"?",1),o("button",{onClick:l,class:"declare-winner-button"},[...c[0]||(c[0]=[o("span",{class:"button-icon"},"🏆",-1),Y(" Declare Winner ",-1)])])])])):K("",!0)]),_:1}),o("div",Fr,[r.value?(x(),M("button",{key:0,onClick:i,class:"control-button clear-bans-button"},[...c[2]||(c[2]=[o("span",{class:"button-icon"},"🗑️",-1),Y(" Clear Bans ",-1)])])):K("",!0),o("button",{onClick:d,class:"control-button reset-button"},[...c[3]||(c[3]=[o("span",{class:"button-icon"},"↩️",-1),Y(" Back to Setup ",-1)])])])]),de($r,{"is-open":s.value,onClose:f},null,8,["is-open"])]))}}),Vr=le(Ur,[["__scopeId","data-v-9e993b18"]]),zr={class:"set-complete-view"},Hr={class:"set-complete-container"},Dr={class:"winner-announcement"},Wr={class:"winner-name"},jr={class:"final-score"},qr={class:"match-summary"},Kr={class:"match-format"},Qr={class:"games-played"},Jr=X({__name:"SetCompleteView",setup(e){const t=oe(),n=Fe(),s=E(()=>t.players),a=E(()=>t.currentGame),r=E(()=>t.matchFormat==="BO3"?"Best of 3":"Best of 5"),l=E(()=>s.value[0].score>s.value[1].score?0:1),f=E(()=>s.value[l.value].name);function i(){t.resetMatch(),n.push("/")}function d(){const p=s.value[0].name,c=s.value[1].name,u=t.matchFormat;t.resetMatch(),t.setupMatch({player1Name:p,player2Name:c,matchFormat:u,firstBan:0,gentlemansAgreement:!1}),n.push("/game")}return(p,c)=>(x(),M("div",zr,[o("div",Hr,[c[2]||(c[2]=o("h1",{class:"title"},"Set Complete!",-1)),o("div",Dr,[c[0]||(c[0]=o("h2",{class:"subtitle"},"Winner",-1)),o("div",Wr,G(f.value),1),o("div",jr,G(s.value[0].name)+": "+G(s.value[0].score)+" - "+G(s.value[1].name)+": "+G(s.value[1].score),1)]),o("div",qr,[c[1]||(c[1]=o("h3",null,"Match Summary",-1)),o("div",Kr,G(r.value),1),o("div",Qr,"Games Played: "+G(a.value-1),1)]),o("div",{class:"actions"},[o("button",{class:"button is-primary",onClick:i},"New Match"),o("button",{class:"button is-info",onClick:d},"Rematch (Same Players)")])])]))}}),Yr=le(Jr,[["__scopeId","data-v-37c5765e"]]),an=Us({history:hs("/smash-eu-stage-striker/"),routes:[{path:"/",name:"home",component:Pa},{path:"/game",name:"game",component:Vr},{path:"/set-complete",name:"set-complete",component:Yr}]});an.beforeEach((e,t,n)=>{Gt(async()=>{const{useGameStore:s}=await Promise.resolve().then(()=>sn);return{useGameStore:s}},void 0).then(({useGameStore:s})=>{const a=s();e.name==="home"&&a.currentPhase!=="setup"?a.currentPhase==="set-complete"?n({name:"set-complete"}):n({name:"game"}):a.currentPhase==="set-complete"&&e.name!=="set-complete"?n({name:"set-complete"}):n()}).catch(()=>{n()})});const nt=_n(js),rn=wn();rn.use(Fn);nt.use(rn);nt.use(an);nt.mount("#app");Gt(async()=>{const{useGameStore:e}=await Promise.resolve().then(()=>sn);return{useGameStore:e}},void 0).then(({useGameStore:e})=>{const t=e();setTimeout(()=>{t.validateRestoredState()},100)}).catch(()=>{console.warn("Could not validate store state")});
